---
import { getEntry } from "astro:content";
import Prose from "@/components/Prose.astro";

const biographia = await getEntry("biography", "biography");
const { Content } = await biographia.render();
const { img, name, birthyear, deathyear, footer } = biographia.data;
---

<div
  class="flex justify-center items-center mx-auto relative profile-container"
>
  <div
    class="border-4 border-[#a8955e] rounded-full overflow-hidden w-32 h-32 md:w-48 md:h-48"
  >
    <div
      class="w-full h-full bg-center bg-no-repeat bg-cover text-justify"
      style={img}
    >
    </div>
  </div>
</div>

<h1
  class="font-dancingScript text-[#0e0e1b] text-2xl md:text-[28px] font-bold leading-tight tracking-[-0.015em] text-center pb-3 pt-5"
>
  {name}
</h1>

<p
  class="text-[#505095] text-sm font-normal leading-normal text-center pb-1 pt-1 border-t-2 border-b-2 border-solid border-[#a8955e] max-w-[100px] mx-auto"
>
  {birthyear} - {deathyear}
</p>

<h2
  class="text-[#0e0e1b] text-xl md:text-[22px] font-bold leading-tight tracking-[-0.015em] pt-5 mx-auto"
>
  BIOGRAFÍA
</h2>
<Prose>
  <Content />
</Prose>

<p
  class="font-dancingScript mx-auto text-[#0e0e1b] text-xl font-bold leading-normal pb-3 pt-1 px-3 text-center"
>
  "{footer}"
</p>

<script type="module">
  document.addEventListener('DOMContentLoaded', function () {
    const textContainer = document.getElementById('text-container');
    const toggleButton = document.getElementById('toggle-button');
    const fullText = textContainer.innerHTML.trim();
    const truncatedText = fullText.substring(0, 400) + '...';

    // Inicialmente muestra el texto truncado
    textContainer.innerHTML = truncatedText;

    toggleButton.addEventListener('click', function () {
      if (toggleButton.innerHTML === 'VER MÁS') {
        // Mostrar el texto completo y cambiar el botón a "Ver menos"
        textContainer.innerHTML = fullText;
        toggleButton.innerHTML = 'VER MENOS';
      } else {
        // Mostrar el texto truncado y cambiar el botón a "Ver más"
        textContainer.innerHTML = truncatedText;
        toggleButton.innerHTML = 'VER MÁS';
      }
    });
  });
</script>